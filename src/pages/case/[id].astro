---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';
import projects from '../../data/projects.json';

export function getStaticPaths() {
  return projects
    .filter(p => p.isCaseStudy && p.caseStudy)
    .map(project => ({
      params: { id: project.id },
      props: { project }
    }));
}

const { project } = Astro.props;
const caseStudy = project.caseStudy;
---

<BaseLayout title={`${project.title} | Case Study | Seth Mbasha`}>
  <Navbar isHomePage={false} />
  <main>
    <section class="case-study-section" style="padding-top: 100px;">
      <div class="container">
        <a href="/projects" class="back-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Back to Projects
        </a>

        <div class="case-study-header">
          <span class="case-study-category">{project.category}</span>
          <h1 class="case-study-title">{project.title}</h1>
          <p class="case-study-description">{project.description}</p>
        </div>

        <div class="case-study-image">
          <img src={project.image} alt={project.title} loading="lazy" />
        </div>

        <div class="case-study-content">
          <div class="case-study-section">
            <h2>Overview</h2>
            <p>{caseStudy.overview}</p>
          </div>

          <div class="case-study-section">
            <h2>The Challenge</h2>
            <p>{caseStudy.challenge}</p>
          </div>

          <div class="case-study-section">
            <h2>Approach</h2>
            <p>{caseStudy.approach}</p>
          </div>

          <div class="case-study-section">
            <h2>Solution</h2>
            <p>{caseStudy.solution}</p>
          </div>

          <div class="case-study-section">
            <h2>Key Features</h2>
            <ul class="features-list">
              {caseStudy.features.map((feature: string) => (
                <li>{feature}</li>
              ))}
            </ul>
          </div>

          <div class="case-study-section">
            <h2>Technologies Used</h2>
            <div class="tech-tags">
              {caseStudy.technologies.map((tech: string) => (
                <span class="tech-tag">{tech}</span>
              ))}
            </div>
          </div>

          <div class="case-study-cta">
            <a href={project.link} class="btn btn-primary" target="_blank" rel="noopener noreferrer">
              View on GitHub
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M7 17L17 7M17 7H7M17 7V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
